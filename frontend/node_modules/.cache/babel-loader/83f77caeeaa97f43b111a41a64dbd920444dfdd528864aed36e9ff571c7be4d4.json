{"ast":null,"code":"var _jsxFileName = \"C:\\\\PDFAI\\\\frontend\\\\src\\\\components\\\\FileUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { uploadPDF } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onUploadSuccess,\n  onUploadError\n}) => {\n  _s();\n  const [isUploading, setIsUploading] = useState(false);\n  const onDrop = useCallback(async acceptedFiles => {\n    const file = acceptedFiles[0];\n    if (!file) return;\n    if (file.type !== 'application/pdf') {\n      onUploadError('PDFファイルのみアップロード可能です');\n      return;\n    }\n\n    // 既にアップロード中の場合は処理をスキップ\n    if (isUploading) {\n      return;\n    }\n    setIsUploading(true);\n    try {\n      const response = await uploadPDF(file);\n      onUploadSuccess(response);\n    } catch (error) {\n      var _error$response, _error$response2, _error$response3, _error$response3$data;\n      console.error('Upload error details:', error);\n      let errorMessage = 'アップロードに失敗しました';\n      if (error.code === 'ECONNABORTED') {\n        errorMessage = 'アップロードがタイムアウトしました。ファイルサイズが大きすぎる可能性があります。';\n      } else if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 413) {\n        errorMessage = 'ファイルサイズが大きすぎます。';\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) >= 500) {\n        errorMessage = 'サーバーエラーが発生しました。しばらく待ってから再試行してください。';\n      } else if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      onUploadError(errorMessage);\n    } finally {\n      setIsUploading(false);\n    }\n  }, [onUploadSuccess, onUploadError, isUploading]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf']\n    },\n    multiple: false,\n    disabled: isUploading\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ...getRootProps(),\n    style: {\n      border: `2px dashed ${isUploading ? '#999' : '#ccc'}`,\n      borderRadius: '10px',\n      padding: '40px',\n      textAlign: 'center',\n      cursor: isUploading ? 'not-allowed' : 'pointer',\n      backgroundColor: isUploading ? '#f5f5f5' : isDragActive ? '#f0f8ff' : '#fafafa',\n      transition: 'all 0.2s ease',\n      opacity: isUploading ? 0.7 : 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ...getInputProps()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), isUploading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u30A2\\u30C3\\u30D7\\u30ED\\u30FC\\u30C9\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '50px',\n          height: '50px',\n          border: '3px solid #f3f3f3',\n          borderTop: '3px solid #3498db',\n          borderRadius: '50%',\n          animation: 'spin 1s linear infinite',\n          margin: '0 auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: isDragActive ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"PDF\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u3053\\u3053\\u306B\\u30C9\\u30ED\\u30C3\\u30D7\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"PDF\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u30C9\\u30E9\\u30C3\\u30B0\\uFF06\\u30C9\\u30ED\\u30C3\\u30D7\\u3059\\u308B\\u304B\\u3001\\u30AF\\u30EA\\u30C3\\u30AF\\u3057\\u3066\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px',\n            color: '#666'\n          },\n          children: \".pdf \\u30D5\\u30A1\\u30A4\\u30EB\\u306E\\u307F\\u5BFE\\u5FDC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"HL/qRiO7RSryAIHotyFfik5+zTg=\", false, function () {\n  return [useDropzone];\n});\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useCallback","useState","useDropzone","uploadPDF","jsxDEV","_jsxDEV","FileUpload","onUploadSuccess","onUploadError","_s","isUploading","setIsUploading","onDrop","acceptedFiles","file","type","response","error","_error$response","_error$response2","_error$response3","_error$response3$data","console","errorMessage","code","status","data","detail","message","getRootProps","getInputProps","isDragActive","accept","multiple","disabled","style","border","borderRadius","padding","textAlign","cursor","backgroundColor","transition","opacity","children","fileName","_jsxFileName","lineNumber","columnNumber","width","height","borderTop","animation","margin","fontSize","color","_c","$RefreshReg$"],"sources":["C:/PDFAI/frontend/src/components/FileUpload.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { uploadPDF } from '../services/api';\nimport { UploadResponse } from '../types';\n\ninterface FileUploadProps {\n  onUploadSuccess: (response: UploadResponse) => void;\n  onUploadError: (error: string) => void;\n}\n\nconst FileUpload: React.FC<FileUploadProps> = ({ onUploadSuccess, onUploadError }) => {\n  const [isUploading, setIsUploading] = useState(false);\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (!file) return;\n\n    if (file.type !== 'application/pdf') {\n      onUploadError('PDFファイルのみアップロード可能です');\n      return;\n    }\n\n    // 既にアップロード中の場合は処理をスキップ\n    if (isUploading) {\n      return;\n    }\n\n    setIsUploading(true);\n    try {\n      const response = await uploadPDF(file);\n      onUploadSuccess(response);\n    } catch (error: any) {\n      console.error('Upload error details:', error);\n      let errorMessage = 'アップロードに失敗しました';\n      \n      if (error.code === 'ECONNABORTED') {\n        errorMessage = 'アップロードがタイムアウトしました。ファイルサイズが大きすぎる可能性があります。';\n      } else if (error.response?.status === 413) {\n        errorMessage = 'ファイルサイズが大きすぎます。';\n      } else if (error.response?.status >= 500) {\n        errorMessage = 'サーバーエラーが発生しました。しばらく待ってから再試行してください。';\n      } else if (error.response?.data?.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      onUploadError(errorMessage);\n    } finally {\n      setIsUploading(false);\n    }\n  }, [onUploadSuccess, onUploadError, isUploading]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf']\n    },\n    multiple: false,\n    disabled: isUploading\n  });\n\n  return (\n    <div\n      {...getRootProps()}\n      style={{\n        border: `2px dashed ${isUploading ? '#999' : '#ccc'}`,\n        borderRadius: '10px',\n        padding: '40px',\n        textAlign: 'center',\n        cursor: isUploading ? 'not-allowed' : 'pointer',\n        backgroundColor: isUploading ? '#f5f5f5' : (isDragActive ? '#f0f8ff' : '#fafafa'),\n        transition: 'all 0.2s ease',\n        opacity: isUploading ? 0.7 : 1\n      }}\n    >\n      <input {...getInputProps()} />\n      {isUploading ? (\n        <div>\n          <p>アップロード中...</p>\n          <div style={{ \n            width: '50px', \n            height: '50px', \n            border: '3px solid #f3f3f3',\n            borderTop: '3px solid #3498db',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite',\n            margin: '0 auto'\n          }} />\n        </div>\n      ) : (\n        <div>\n          {isDragActive ? (\n            <p>PDFファイルをここにドロップしてください</p>\n          ) : (\n            <div>\n              <p>PDFファイルをドラッグ＆ドロップするか、クリックして選択してください</p>\n              <p style={{ fontSize: '14px', color: '#666' }}>\n                .pdf ファイルのみ対応\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n      <style>\n        {`\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `}\n      </style>\n    </div>\n  );\n};\n\nexport default FileUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}